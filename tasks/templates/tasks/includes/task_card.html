<div class="card mb-3 shadow-sm">
    <div class="card-body">
        <h6 class="card-title fw-bold">{{ task.title }}</h6>
        <p class="card-text small text-muted">{{ task.description|truncatewords:8 }}</p>

        <div class="d-flex justify-content-between align-items-center mt-3">
            {% if task.assignee %}
                <span class="badge bg-light text-dark border">
                    <i class="bi bi-person-circle"></i> {{ task.assignee.username }}
                </span>
            {% else %}
                <span class="badge bg-light text-muted border">Unassigned</span>
            {% endif %}
            {% if user_role == 'admin' %}
                <a href="{% url 'tasks:assign_task' task.id %}" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-person-plus"></i> Assign
                </a>
            {% endif %}
        </div>

        <form action="{% url 'tasks:update_task_status' task.id %}" method="POST" class="mt-2">
            {% csrf_token %}
            <select name="status" class="form-select form-select-sm" onchange="this.form.submit()">
                <option value="TODO" {% if task.status == 'TODO' %}selected{% endif %}>To Do</option>
                <option value="IN_PROGRESS" {% if task.status == 'IN_PROGRESS' %}selected{% endif %}>In Progress</option>
                <option value="DONE" {% if task.status == 'DONE' %}selected{% endif %}>Done</option>
            </select>
        </form>
    </div>
</div>
